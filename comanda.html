 <!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Comandă Produse</title>
<style>
body{background:#000;color:gold;font-family:Arial,sans-serif;margin:0;padding:0;}
h2{text-align:center;margin:30px 0;}
table{width:90%;max-width:700px;margin:0 auto;border-collapse:collapse;}
th,td{border:1px solid gold;padding:8px;text-align:center;}
input,button{padding:8px;margin:5px;width:100%;}
form{max-width:600px;margin:20px auto;}
button{background:#28a745;color:#000;border:none;border-radius:5px;cursor:pointer;font-weight:bold;}
button:hover{background:#218838;}
</style>
</head>
<body>
<h2>Comanda Ta</h2>
<table id="cart-table">
  <thead>
    <tr><th>Produs</th><th>Cantitate</th><th>Preț</th></tr>
  </thead>
  <tbody></tbody>
</table>
<p id="total" style="text-align:right; font-weight:bold;"></p>

<form action="https://formspree.io/f/xovkjrqj" method="POST">
  <label>Nume:</label><input type="text" name="nume" required>
  <label>Telefon:</label><input type="tel" name="telefon" required>
  <label>Strada:</label><input type="text" name="strada" required>
  <label>Oraș:</label><input type="text" name="oras" required>
  <input type="hidden" id="produse_cos" name="produse_cos">
  <button type="submit">Trimite Comanda</button>
</form>

<script>
// Preluare produse din LocalStorage
let cart=JSON.parse(localStorage.getItem('cart'))||[];
const tbody=document.querySelector('#cart-table tbody');
let total=0;
cart.forEach(item=>{
  item.variants.forEach(v=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${item.name}</td><td>${v.qty}</td><td>${v.qty*v.price} lei</td>`;
    tbody.appendChild(tr);
    total+=v.qty*v.price;
  });
});
document.getElementById('total').textContent="Total: "+total+" lei";
document.getElementById('produse_cos').value=JSON.stringify(cart);
</script>
</body>
</html>